
* 24jan22
** working on branch samn

need to include current dipoles, then run ~15 s sim with 3 Hz stimulation to thalamus
with strong/weak stimuli ... record all the current dipoles and the 3D locations ... 

before making additions, try compile/run

model code is in sim subdirectory, mod files in mod

cd sim
nrnivmodl mod

...

Successfully created x86_64/special

usage described in sim/init.py

Starting script to run NetPyNE-basedS1 model.

Usage:
    python init.py # Run simulation, optionally plot a raster

MPI usage:
    mpiexec -n 4 nrniv -python -mpi init.py

change duration to 1 s (set in cfg.py)

try with 30 cores first ... and 300 ms

mpiexec -n 30 nrniv -python -mpi init.py

* 25jan22
** sim ran for 300 ms -- output -->> data/v6_batch0_24jan22

got many warnings about compartment connectivity

Notice: compartCell_L6_UTPC_cAD_HH_full_31341.dend_9(0) had previously been connected to parent compartCell_L6_UTPC_cAD_HH_full_31341.dend_1(1)
21 /opt/anaconda3/bin/nrniv: cai is being written at the same location by cadad and CaDynamics_E2
21  near line 0
21  nao0_na_ion = 140.0
                    ^
  Number of connections on node 23: 327049 
  Number of synaptic contacts on node 23: 1683952 
  Number of connections on node 22: 327770 
  Number of synaptic contacts on node 22: 1690703 
  Number of connections on node 24: 330118 
  Number of synaptic contacts on node 24: 1707457 
  Number of connections on node 16: 326600 
  Number of synaptic contacts on node 16: 1691590 
  Number of connections on node 20: 327888 
  Number of synaptic contacts on node 20: 1693919 
  Number of connections on node 27: 325423 
  Number of synaptic contacts on node 27: 1681016 
  Number of connections on node 18: 326127 
  Number of synaptic contacts on node 18: 1686209 
  Number of connections on node 12: 325469 
  Number of synaptic contacts on node 12: 1685109 
  Number of connections on node 4: 327165 
  Number of synaptic contacts on node 4: 1689874 
  Number of connections on node 8: 325957 
  Number of synaptic contacts on node 8: 1684986 
  Number of connections on node 11: 328112 
  Number of synaptic contacts on node 11: 1697838 
  Number of connections on node 13: 331209 
  Number of synaptic contacts on node 13: 1708654 
  Number of connections on node 26: 323398 
  Number of synaptic contacts on node 26: 1669743 
  Number of connections on node 29: 328557 
  Number of synaptic contacts on node 29: 1696282 
  Number of connections on node 6: 327358 
  Number of synaptic contacts on node 6: 1693132 
  Number of connections on node 10: 328734 
  Number of synaptic contacts on node 10: 1700592 
  Number of connections on node 1: 329323 
  Number of synaptic contacts on node 1: 1700543 
  Number of connections on node 9: 325557 
  Number of synaptic contacts on node 9: 1683508 
  Number of connections on node 15: 327432 
  Number of synaptic contacts on node 15: 1698725 
  Number of connections on node 21: 325085 
  Number of synaptic contacts on node 21: 1680111 
  Number of connections on node 5: 326871 
  Number of synaptic contacts on node 5: 1682473 
  Number of connections on node 25: 327435 
  Number of synaptic contacts on node 25: 1690639 
  Number of connections on node 14: 330104 
  Number of synaptic contacts on node 14: 1711792 
  Number of connections on node 3: 325894 
  Number of synaptic contacts on node 3: 1680671 
  Number of connections on node 28: 326045 
  Number of synaptic contacts on node 28: 1683595 
  Number of connections on node 7: 326082 
  Number of synaptic contacts on node 7: 1685571 
  Number of connections on node 2: 327017 
  Number of synaptic contacts on node 2: 1692306 
  Number of connections on node 19: 330702 
  Number of synaptic contacts on node 19: 1712099 
  Number of connections on node 0: 328703 
  Number of synaptic contacts on node 0: 1700844 
  Number of connections on node 17: 327270 
  Number of synaptic contacts on node 17: 1689685 
  Done; cell connection time = 12858.19 s.
Adding stims...
  Number of stims on node 24: 10593 
  Number of stims on node 8: 10592 
  Number of stims on node 13: 10592 
  Number of stims on node 16: 10592 
  Number of stims on node 5: 10592 
  Number of stims on node 22: 10593 
  Number of stims on node 25: 10593 
  Number of stims on node 12: 10592 
  Number of stims on node 29: 10583 
  Number of stims on node 1: 10593 
  Number of stims on node 19: 10592 
  Number of stims on node 10: 10592 
  Number of stims on node 28: 10583 
  Number of stims on node 6: 10592 
  Number of stims on node 26: 10583 
  Number of stims on node 3: 10592 
  Number of stims on node 9: 10592 
  Number of stims on node 21: 10593 
  Number of stims on node 23: 10593 
  Number of stims on node 18: 10592 
  Number of stims on node 15: 10592 
  Number of stims on node 17: 10592 
  Number of stims on node 20: 10592 
  Number of stims on node 7: 10592 
  Number of stims on node 0: 10593 
  Number of stims on node 2: 10592 
  Number of stims on node 11: 10592 
  Number of stims on node 4: 10592 
  Number of stims on node 14: 10592 
  Number of stims on node 27: 10583 
  Done; cell stims creation time = 14.07 s.
Recording 29 traces of 1 types on node 18
Recording 27 traces of 1 types on node 29
Recording 36 traces of 1 types on node 5
Recording 38 traces of 1 types on node 24
Recording 39 traces of 1 types on node 22
Recording 32 traces of 1 types on node 8
Recording 27 traces of 1 types on node 19
Recording 34 traces of 1 types on node 3
Recording 38 traces of 1 types on node 6
Recording 29 traces of 1 types on node 16
Recording 30 traces of 1 types on node 1
Recording 32 traces of 1 types on node 25
Recording 37 traces of 1 types on node 13
Recording 33 traces of 1 types on node 26
Recording 33 traces of 1 types on node 10
Recording 37 traces of 1 types on node 12
Recording 29 traces of 1 types on node 21
Recording 31 traces of 1 types on node 9
Recording 28 traces of 1 types on node 23
Recording 31 traces of 1 types on node 28
Recording 35 traces of 1 types on node 17
Recording 35 traces of 1 types on node 4
Recording 36 traces of 1 types on node 15
Recording 34 traces of 1 types on node 0
Recording 34 traces of 1 types on node 27
Recording 31 traces of 1 types on node 14
Recording 26 traces of 1 types on node 2
Recording 26 traces of 1 types on node 11
Recording 25 traces of 1 types on node 7
Recording 27 traces of 1 types on node 20
0.0s

Running simulation for 300.0 ms...
0.1s
0.2s
0.3s
  Done; run time = 11948.98 s; real-time ratio: 0.00.

Gathering data...
  Done; gather time = 13.98 s.

Analyzing...
  Cells: 38612
  Connections: 0 (0.00 per cell)
  Spikes: 61049 (5.27 Hz)
   L1_DAC_bNA : 0.000 Hz
   L1_DAC_cNA : 0.000 Hz
   L1_DLAC_cNA : 0.000 Hz
   L1_HAC_bNA : 0.000 Hz
   L1_HAC_cIR : 0.000 Hz
   L1_HAC_cNA : 0.000 Hz
   L1_NGC-DA_bNA : 0.000 Hz
   L1_NGC-DA_cAC : 0.000 Hz
   L1_NGC-DA_cNA : 0.000 Hz
   L1_NGC-DA_cST : 0.000 Hz
   L1_NGC-SA_cNA : 0.000 Hz
   L1_SLAC_bNA : 0.000 Hz
   L1_SLAC_cAC : 0.000 Hz
   L1_SLAC_cNA : 0.000 Hz
   L23_BP_bAC : 0.000 Hz
   L23_BP_bIR : 0.000 Hz
   L23_BP_bNA : 0.000 Hz
   L23_BP_cAC : 0.000 Hz
   L23_BP_cNA : 0.000 Hz
   L23_BP_dST : 0.000 Hz
   L23_BTC_bAC : 0.000 Hz
   L23_BTC_bIR : 0.000 Hz
   L23_BTC_bNA : 0.000 Hz
   L23_BTC_cAC : 0.000 Hz
   L23_BTC_cNA : 0.000 Hz
   L23_ChC_cAC : 0.000 Hz
   L23_ChC_cNA : 0.000 Hz
   L23_ChC_dNA : 0.000 Hz
   L23_DBC_bAC : 0.000 Hz
   L23_DBC_bIR : 0.000 Hz
   L23_DBC_bNA : 0.000 Hz
   L23_DBC_cAC : 0.000 Hz
   L23_LBC_bAC : 0.000 Hz
   L23_LBC_bNA : 0.000 Hz
   L23_LBC_cAC : 0.000 Hz
   L23_LBC_cNA : 0.000 Hz
   L23_LBC_cST : 0.000 Hz
   L23_LBC_dNA : 0.000 Hz
   L23_MC_bAC : 0.000 Hz
   L23_MC_bNA : 0.000 Hz
   L23_MC_cAC : 0.000 Hz
   L23_MC_cNA : 0.000 Hz
   L23_MC_dNA : 0.000 Hz
   L23_NBC_bAC : 0.000 Hz
   L23_NBC_bNA : 0.000 Hz
   L23_NBC_cAC : 0.000 Hz
   L23_NBC_cIR : 0.000 Hz
   L23_NBC_cNA : 0.000 Hz
   L23_NBC_dNA : 0.000 Hz
   L23_NGC_bNA : 0.000 Hz
   L23_NGC_cAC : 0.000 Hz
   L23_NGC_cNA : 0.000 Hz
   L23_NGC_cST : 0.000 Hz
   L23_PC_cAD : 0.000 Hz
   L23_SBC_bNA : 0.000 Hz
   L23_SBC_cAC : 0.000 Hz
   L23_SBC_dNA : 0.000 Hz
   L4_BP_bAC : 0.000 Hz
   L4_BP_bIR : 0.000 Hz
   L4_BP_bNA : 0.000 Hz
   L4_BP_cAC : 0.000 Hz
   L4_BP_cNA : 0.000 Hz
   L4_BP_dST : 0.000 Hz
   L4_BTC_bAC : 0.000 Hz
   L4_BTC_bIR : 0.000 Hz
   L4_BTC_bST : 0.000 Hz
   L4_BTC_cAC : 0.000 Hz
   L4_BTC_cNA : 0.000 Hz
   L4_BTC_dNA : 0.000 Hz
   L4_ChC_cAC : 0.000 Hz
   L4_ChC_cNA : 0.000 Hz
   L4_ChC_dNA : 0.000 Hz
   L4_DBC_bAC : 0.000 Hz
   L4_DBC_bIR : 0.000 Hz
   L4_DBC_bNA : 0.000 Hz
   L4_DBC_bST : 0.000 Hz
   L4_DBC_cAC : 0.000 Hz
   L4_DBC_cIR : 0.000 Hz
   L4_DBC_cNA : 0.000 Hz
   L4_LBC_cAC : 0.000 Hz
   L4_LBC_cNA : 0.000 Hz
   L4_LBC_cST : 0.000 Hz
   L4_LBC_dNA : 0.000 Hz
   L4_LBC_dST : 0.000 Hz
   L4_MC_bAC : 0.000 Hz
   L4_MC_bNA : 0.000 Hz
   L4_MC_cAC : 0.000 Hz
   L4_MC_cNA : 0.000 Hz
   L4_MC_dNA : 0.000 Hz
   L4_NBC_cAC : 0.000 Hz
   L4_NBC_cIR : 0.000 Hz
   L4_NBC_cNA : 0.000 Hz
   L4_NBC_dNA : 0.000 Hz
   L4_NGC_bNA : 0.000 Hz
   L4_NGC_cAC : 0.000 Hz
   L4_NGC_cNA : 0.000 Hz
   L4_NGC_cST : 0.000 Hz
   L4_PC_cAD : 0.000 Hz
   L4_SBC_bNA : 0.000 Hz
   L4_SBC_cAC : 0.000 Hz
   L4_SBC_dNA : 0.000 Hz
   L4_SP_cAD : 0.000 Hz
   L4_SS_cAD : 0.000 Hz
   L5_BP_bAC : 0.000 Hz
   L5_BP_bIR : 0.000 Hz
   L5_BP_bNA : 0.000 Hz
   L5_BP_cAC : 0.000 Hz
   L5_BP_cNA : 0.000 Hz
   L5_BP_dST : 0.000 Hz
   L5_BTC_bAC : 0.000 Hz
   L5_BTC_cAC : 0.000 Hz
   L5_BTC_cNA : 0.000 Hz
   L5_ChC_cAC : 0.000 Hz
   L5_ChC_cNA : 0.000 Hz
   L5_ChC_dNA : 0.000 Hz
   L5_DBC_bAC : 0.000 Hz
   L5_DBC_bIR : 0.000 Hz
   L5_DBC_bNA : 0.741 Hz
   L5_DBC_bST : 1.852 Hz
   L5_DBC_cAC : 0.000 Hz
   L5_DBC_cIR : 0.000 Hz
   L5_DBC_cNA : 0.000 Hz
   L5_LBC_bAC : 0.000 Hz
   L5_LBC_cAC : 0.000 Hz
   L5_LBC_cIR : 0.000 Hz
   L5_LBC_cNA : 0.000 Hz
   L5_LBC_cST : 0.000 Hz
   L5_LBC_dNA : 0.000 Hz
   L5_LBC_dST : 0.000 Hz
   L5_MC_bAC : 0.000 Hz
   L5_MC_bIR : 0.000 Hz
   L5_MC_bST : 0.000 Hz
   L5_MC_cAC : 0.000 Hz
   L5_MC_cNA : 0.000 Hz
   L5_MC_cST : 0.000 Hz
   L5_MC_dNA : 0.000 Hz
   L5_NBC_bAC : 0.000 Hz
   L5_NBC_bIR : 0.000 Hz
   L5_NBC_bST : 0.000 Hz
   L5_NBC_cAC : 0.000 Hz
   L5_NBC_cIR : 0.000 Hz
   L5_NBC_cNA : 0.000 Hz
   L5_NBC_cST : 0.000 Hz
   L5_NBC_dST : 0.000 Hz
   L5_NGC_bNA : 0.000 Hz
   L5_NGC_cAC : 0.000 Hz
   L5_NGC_cNA : 0.000 Hz
   L5_NGC_cST : 0.000 Hz
   L5_SBC_bNA : 0.000 Hz
   L5_SBC_cAC : 0.000 Hz
   L5_SBC_dNA : 0.000 Hz
   L5_STPC_cAD : 0.000 Hz
   L5_TTPC1_cAD : 0.000 Hz
   L5_TTPC2_cAD : 0.000 Hz
   L5_UTPC_cAD : 0.000 Hz
   L6_BPC_cAD : 0.000 Hz
   L6_BP_bAC : 0.000 Hz
   L6_BP_bIR : 0.000 Hz
   L6_BP_bNA : 0.000 Hz
   L6_BP_cAC : 0.000 Hz
   L6_BP_cNA : 0.000 Hz
   L6_BP_dST : 0.000 Hz
   L6_BTC_bAC : 0.000 Hz
   L6_BTC_cAC : 0.000 Hz
   L6_BTC_cNA : 0.000 Hz
   L6_ChC_cAC : 0.000 Hz
   L6_ChC_cNA : 0.000 Hz
   L6_ChC_dNA : 0.000 Hz
   L6_DBC_bAC : 0.000 Hz
   L6_DBC_bIR : 0.000 Hz
   L6_DBC_bNA : 0.000 Hz
   L6_DBC_bST : 0.000 Hz
   L6_DBC_cAC : 0.000 Hz
   L6_DBC_cIR : 0.000 Hz
   L6_DBC_cNA : 0.000 Hz
   L6_IPC_cAD : 0.000 Hz
   L6_LBC_bAC : 0.000 Hz
   L6_LBC_bIR : 0.000 Hz
   L6_LBC_bNA : 0.000 Hz
   L6_LBC_bST : 0.000 Hz
   L6_LBC_cNA : 0.000 Hz
   L6_LBC_cST : 0.000 Hz
   L6_MC_bAC : 0.000 Hz
   L6_MC_bIR : 0.000 Hz
   L6_MC_bNA : 0.000 Hz
   L6_MC_bST : 0.000 Hz
   L6_MC_cAC : 0.000 Hz
   L6_MC_cIR : 0.000 Hz
   L6_MC_cNA : 0.000 Hz
   L6_NBC_bAC : 0.000 Hz
   L6_NBC_bIR : 0.000 Hz
   L6_NBC_bST : 0.000 Hz
   L6_NBC_cAC : 0.000 Hz
   L6_NBC_cIR : 0.000 Hz
   L6_NBC_cNA : 0.000 Hz
   L6_NBC_cST : 0.000 Hz
   L6_NBC_dST : 0.000 Hz
   L6_NGC_bNA : 0.000 Hz
   L6_NGC_cAC : 0.000 Hz
   L6_NGC_cNA : 0.000 Hz
   L6_NGC_cST : 0.000 Hz
   L6_SBC_bNA : 0.000 Hz
   L6_SBC_cAC : 0.000 Hz
   L6_SBC_dNA : 0.000 Hz
   L6_TPC_L1_cAD : 0.000 Hz
   L6_TPC_L4_cAD : 0.000 Hz
   L6_UTPC_cAD : 0.000 Hz
   ss_RTN_o : 27.059 Hz
   ss_RTN_m : 29.541 Hz
   ss_RTN_i : 23.356 Hz
   VPL_sTC : 30.335 Hz
   VPM_sTC : 33.167 Hz
   POm_sTC_s1 : 24.307 Hz
  Simulated time: 0.3 s; 30 workers
  Run time: 11948.98 s
fatal: not a git repository (or any of the parent directories): .git
Saving output as ../data/v6_batch0_24jan22/v6_batch0_24jan22.json  ... 
Finished saving!
  Done; saving time = 4.77 s.
Plotting raster...
Plotting recorded cell traces ... cell
  Done; plotting time = 307.99 s

Total time = 65853.50 s

End time:  2022-01-25 08:26:35.723060

*** run time for 300 ms simulation time = 11949 s, used 30 cores

Running simulation for 300.0 ms...
  Done; run time = 11948.98 s; real-time ratio: 0.00.

so that simulation runtime was ~200 minutes

running for 15 s would take at least 200.0 * 15000 / 300 = 10000.0 minutes = ~167 hours = ~1 week ...

*** output figures in /home/samn/S1_netpyne/data/v6_batch0_24jan22

[[/home/samn/S1_netpyne/data/v6_batch0_24jan22/v6_batch0_24jan22_raster.png]]

** coreneuron

https://github.com/BlueBrain/CoreNeuron

using coreneuron should speed up computations ... 

install cmake ... 

sudo apt install cmake

also need intel compiler

https://www.intel.com/content/www/us/en/develop/documentation/get-started-with-dpcpp-compiler/top.html

** Latest installation instructions for coreneuron from sal/bbp
*** Ubuntu steps -->> corenrninstall.sh
#!/usr/bin/env bash
​
# Scripts related env variables
BASE_DIR=$(pwd)
​
# Simulation related env variables
export SIM_TIME=1000  # set SIM_TIME to something small to avoid long run time (mainly with NEURON)
export SCALE_DENSITY=1 # can be from 0.15 to 1.0
​
# Install Intel Compilers and IntelMPI
install_intel() {
     # download the key to system keyring
     wget -O- https://apt.repos.intel.com/intel-gpg-keys/GPG-PUB-KEY-INTEL-SW-PRODUCTS.PUB \
         | gpg --dearmor | sudo tee /usr/share/keyrings/oneapi-archive-keyring.gpg > /dev/null
​
     # add signed entry to apt sources and configure the APT client to use Intel repository:
     echo "deb [signed-by=/usr/share/keyrings/oneapi-archive-keyring.gpg] https://apt.repos.intel.com/oneapi all main" | sudo tee /etc/apt/sources.list.d/oneAPI.list
​
     sudo apt-get update
​
     sudo apt-get install -y intel-oneapi-compiler-dpcpp-cpp-and-cpp-classic
​
     sudo apt-get install -y intel-oneapi-mpi-devel-2021.5.0
​
}
​
check_intel_compiler() {
    source /opt/intel/oneapi/setvars.sh && \
        gcc --version && g++ --version && \
        icc --version && icpc --version && \
        mpicc -v && mpicxx -v && mpiicc -v && mpiicpc -v
}
​
clone_netpyne_M1() {
    git clone git@github.com:suny-downstate-medical-center/netpyne.git
    git clone -b magkanar/M1_vip_ngf git@github.com:iomaganaris/M1.git
    pushd netpyne
    sudo apt install python3.8-venv
    python3 -m venv ${BASE_DIR}/M1/sim/venv
    source ${BASE_DIR}/M1/sim/venv/bin/activate
    pip3 install -r requirements.txt
    pip3 install matplotlib_scalebar
    popd
}
​
install_neuron() {
    [ -d nrn ] || git clone git@github.com:neuronsimulator/nrn.git
    source /opt/intel/oneapi/setvars.sh
    pushd nrn
    rm -rf build_cpu
    mkdir build_cpu && pushd build_cpu
    cmake .. \
      -DNRN_ENABLE_INTERVIEWS=OFF \
      -DNRN_ENABLE_RX3D=OFF \
      -DNRN_ENABLE_MPI=ON \
      -DCORENRN_ENABLE_OPENMP=OFF \
      -DNRN_ENABLE_CORENEURON=ON \
      -DCORENRN_ENABLE_GPU=OFF \
      -DCORENRN_ENABLE_NMODL=ON \
      -DCORENRN_NMODL_FLAGS=" sympy --analytic" \
      -DNRN_ENABLE_PYTHON=ON \
      -DPYTHON_EXECUTABLE=$(which python3) \
      -DNRN_ENABLE_TESTS=OFF \
      -DCORENRN_ENABLE_UNIT_TESTS=OFF \
      -DCMAKE_INSTALL_PREFIX=./install \
      -DCMAKE_CXX_COMPILER=$(which icpc) \
      -DCMAKE_C_COMPILER=$(which icc) \
      -G Ninja /
    cmake --build . --parallel 40 --target install
    popd
    popd
}
​
build_special() {
    NEURON_BUILD="$1"
    source /opt/intel/oneapi/setvars.sh
    pushd M1
    rm -rf x86_64
    ${BASE_DIR}/nrn/${NEURON_BUILD}/install/bin/nrnivmodl -coreneuron mod
    popd
}
​
run_netpyne_M1_nrn() {
    export PYTHONPATH=${BASE_DIR}/netpyne:${BASE_DIR}/nrn/build_cpu/install/lib/python:${PYTHONPATH}
    source /opt/intel/oneapi/setvars.sh
    pushd M1/sim
    source venv/bin/activate
    sed -i "s#cfg.coreneuron = .*#cfg.coreneuron = False#g" cfg.py
    sed -i "s#cfg.duration = .*#cfg.duration = $SIM_TIME#g" cfg.py
    sed -i "s#cfg.scaleDensity = .*#cfg.scaleDensity = $SCALE_DENSITY#g" cfg.py
    mpirun ../x86_64/special -mpi -python init.py
    popd
}
​
run_netpyne_M1_corenrn() {
    export PYTHONPATH=${BASE_DIR}/netpyne:${BASE_DIR}/nrn/build_cpu/install/lib/python:${PYTHONPATH}
    source /opt/intel/oneapi/setvars.sh
    pushd M1/sim
    source venv/bin/activate
    sed -i "s#cfg.coreneuron = .*#cfg.coreneuron = True#g" cfg.py
    sed -i "s#cfg.duration = .*#cfg.duration = $SIM_TIME#g" cfg.py
    sed -i "s#cfg.scaleDensity = .*#cfg.scaleDensity = $SCALE_DENSITY#g" cfg.py
    mpirun ../x86_64/special -mpi -python init.py
    popd
}
​
install_intel
​
check_intel_compiler
​
clone_netpyne_M1
​
install_neuron
​
build_special build_cpu
​
run_netpyne_M1_nrn
​
run_netpyne_M1_corenrn

*** docker file for CentOS
https://github.com/iomaganaris/docker-centos-intel
** ubuntu packages/corenrn install details

also needed
 bison, flex, ninja-build, cmake

from the corenrninstall.sh script, do not strictly need to install/compile M1 model (though
it's a good test)

      -DPYTHON_EXECUTABLE=$(which python3) \

put this into -DPYTHON_EXECUTABLE:
/opt/anaconda3/bin/python
since dont think need to use python3.8 ...

      -G Ninja /    <<-- that's for the ninja build system

hmm, still get a pthread error in 
* 25feb22
** back to sim

dipole recording: 
 http://www.netpyne.org/_modules/netpyne/sim/run.html#calculateDipole


and setup in A1 model here:
 https://github.com/NathanKlineInstitute/A1/blob/salva_layers/cfg.py

cfg.recordDipole = True
cfg.saveDipoleCells = ['all']
cfg.saveDipolePops = cfg.allpops

cfg.analysis['plotDipole'] = {'saveFig': True}

make sure netpyne latest version that supports dipole recording

pip install netpyne --upgrade

also need lfpy

pip install lfpy
...
Installing collected packages: neuron, meautility, LFPykit, lfpy
Successfully installed LFPykit-0.4 lfpy-2.2.4 meautility-1.5.0 neuron-8.0.2

python 
import LFPy
LFPy.__version__
'2.2.4'

import netpyne
netpyne.__version__
'1.0.1'

updated label in cfg.py too:
cfg.simLabel = 'v6_batch0_25feb22'

ok, try it out for 300 ms with 60 cores ... 

cd ~/S1_netpyne/sim
mpiexec -n 60 --use-hwthread-cpus nrniv -python -mpi init.py

started ~11:47 on cycle ...

*** took a while and then got some errors

Notice: compartCell_L6_UTPC_cAD_HH_full_30999.dend_9(0) had previously been connected to parent compartCell_L6_UTPC_cAD_HH_full_30999.dend_1(1)
  Number of cells on node 40: 643 
  Number of cells on node 7: 644 
  Number of cells on node 16: 644 
  Number of cells on node 43: 643 
  Number of cells on node 1: 644 
  Number of cells on node 34: 643 
  Number of cells on node 9: 644 
  Number of cells on node 29: 644 
  Number of cells on node 53: 643 
  Number of cells on node 3: 644 
  Number of cells on node 25: 644 
  Number of cells on node 6: 644 
  Number of cells on node 47: 643 
  Number of cells on node 44: 643 
  Number of cells on node 19: 644 
  Number of cells on node 55: 643 
  Number of cells on node 15: 644 
  Number of cells on node 46: 643 
  Number of cells on node 49: 643 
  Number of cells on node 11: 644 
  Number of cells on node 30: 644 
  Number of cells on node 39: 643 
  Number of cells on node 57: 643 
  Number of cells on node 56: 643 
  Number of cells on node 36: 643 
  Number of cells on node 4: 644 
  Number of cells on node 59: 643 
  Number of cells on node 41: 643 
  Number of cells on node 45: 643 
  Number of cells on node 12: 644 
  Number of cells on node 35: 643 
  Number of cells on node 51: 643 
  Number of cells on node 18: 644 
  Number of cells on node 33: 643 
  Number of cells on node 27: 644 
  Number of cells on node 58: 643 
  Number of cells on node 50: 643 
  Number of cells on node 13: 644 
  Number of cells on node 5: 644 
  Number of cells on node 14: 644 
  Number of cells on node 17: 644 
  Number of cells on node 28: 644 
  Number of cells on node 42: 643 
  Number of cells on node 32: 643 
  Number of cells on node 23: 644 
  Number of cells on node 52: 643 
  Number of cells on node 24: 644 
  Number of cells on node 26: 644 
  Number of cells on node 8: 644 
  Number of cells on node 0: 644 
  Done; cell creation time = 38.76 s.
Making connections...
  Number of cells on node 38: 643 
  Number of cells on node 10: 644 
  Number of cells on node 54: 643 
  Number of cells on node 2: 644 
  Number of cells on node 48: 643 
  Number of cells on node 20: 644 
  Number of cells on node 22: 644 
  Number of cells on node 31: 644 
  Number of cells on node 37: 643 
  Number of cells on node 21: 644 
  Number of connections on node 22: 166737 
  Number of synaptic contacts on node 22: 859959 
  Number of connections on node 34: 163827 
  Number of synaptic contacts on node 34: 847873 
  Number of connections on node 42: 163101 
  Number of synaptic contacts on node 42: 844592 
  Number of connections on node 35: 162842 
  Number of synaptic contacts on node 35: 835757 
  Number of connections on node 26: 163084 
  Number of synaptic contacts on node 26: 842650 
  Number of connections on node 25: 166614 
  Number of synaptic contacts on node 25: 860776 
  Number of connections on node 33: 163884 
  Number of synaptic contacts on node 33: 844706 
  Number of connections on node 36: 163696 
  Number of synaptic contacts on node 36: 848190 
  Number of connections on node 48: 163134 
  Number of synaptic contacts on node 48: 844925 
  Number of connections on node 18: 162993 
  Number of synaptic contacts on node 18: 841284 
  Number of connections on node 54: 165215 
  Number of synaptic contacts on node 54: 855995 
  Number of connections on node 5: 164029 
  Number of synaptic contacts on node 5: 846716 
  Number of connections on node 16: 164530 
  Number of synaptic contacts on node 16: 850724 
  Number of connections on node 13: 165834 
  Number of synaptic contacts on node 13: 857207 
  Number of connections on node 12: 162368 
  Number of synaptic contacts on node 12: 840517 
  Number of connections on node 41: 163607 
  Number of synaptic contacts on node 41: 846404 
  Number of connections on node 20: 163462 
  Number of synaptic contacts on node 20: 845304 
  Number of connections on node 15: 164152 
  Number of synaptic contacts on node 15: 854731 
  Number of connections on node 47: 163119 
  Number of synaptic contacts on node 47: 841683 
  Number of connections on node 6: 163662 
  Number of synaptic contacts on node 6: 844942 
  Number of connections on node 51: 162068 
  Number of synaptic contacts on node 51: 837101 
  Number of connections on node 53: 164956 
  Number of synaptic contacts on node 53: 846414 
  Number of connections on node 32: 163016 
  Number of synaptic contacts on node 32: 843340 
  Number of connections on node 4: 163338 
  Number of synaptic contacts on node 4: 842001 
  Number of connections on node 11: 164505 
  Number of synaptic contacts on node 11: 851434 
  Number of connections on node 57: 161468 
  Number of synaptic contacts on node 57: 832158 
  Number of connections on node 58: 162759 
  Number of synaptic contacts on node 58: 837977 
  Number of connections on node 9: 160545 
  Number of synaptic contacts on node 9: 830595 
  Number of connections on node 37: 162488 
  Number of synaptic contacts on node 37: 839117 
  Number of connections on node 1: 165151 
  Number of synaptic contacts on node 1: 852032 
  Number of connections on node 23: 162093 
  Number of synaptic contacts on node 23: 837538 
  Number of connections on node 24: 164903 
  Number of synaptic contacts on node 24: 851462 
  Number of connections on node 19: 165124 
  Number of synaptic contacts on node 19: 857304 
  Number of connections on node 39: 165012 
  Number of synaptic contacts on node 39: 852913 
  Number of connections on node 3: 162010 
  Number of synaptic contacts on node 3: 835965 
  Number of connections on node 2: 164001 
  Number of synaptic contacts on node 2: 848966 
  Number of connections on node 38: 162136 
  Number of synaptic contacts on node 38: 837718 
  Number of connections on node 44: 162537 
  Number of synaptic contacts on node 44: 841783 
  Number of connections on node 8: 163821 
  Number of synaptic contacts on node 8: 847268 
  Number of connections on node 0: 164250 
  Number of synaptic contacts on node 0: 849100 
  Number of connections on node 30: 164453 
  Number of synaptic contacts on node 30: 851744 
  Number of connections on node 49: 165578 
  Number of synaptic contacts on node 49: 854795 
  Number of connections on node 52: 161033 
  Number of synaptic contacts on node 52: 830744 
  Number of connections on node 40: 164938 
  Number of synaptic contacts on node 40: 855190 
  Number of connections on node 14: 167567 
  Number of synaptic contacts on node 14: 870009 
  Number of connections on node 28: 163286 
  Number of synaptic contacts on node 28: 845618 
  Number of connections on node 46: 162070 
  Number of synaptic contacts on node 46: 840866 
  Number of connections on node 31: 164172 
  Number of synaptic contacts on node 31: 848511 
  Number of connections on node 59: 163451 
  Number of synaptic contacts on node 59: 842603 
  Number of connections on node 10: 163796 
  Number of synaptic contacts on node 10: 845402 
  Number of connections on node 55: 160821 
  Number of synaptic contacts on node 55: 829863 
  Number of connections on node 7: 163594 
  Number of synaptic contacts on node 7: 846454 
  Number of connections on node 27: 163955 
  Number of synaptic contacts on node 27: 848858 
  Number of connections on node 45: 163280 
  Number of synaptic contacts on node 45: 843994 
  Number of connections on node 17: 164151 
  Number of synaptic contacts on node 17: 848002 
  Number of connections on node 43: 165375 
  Number of synaptic contacts on node 43: 851447 
  Number of connections on node 21: 163017 
  Number of synaptic contacts on node 21: 843010 
  Number of connections on node 29: 165106 
  Number of synaptic contacts on node 29: 853679 
  Number of connections on node 50: 164426 
  Number of synaptic contacts on node 50: 848615 
  Number of connections on node 56: 160314 
  Number of synaptic contacts on node 56: 827093 
  Done; cell connection time = 20307.47 s.
Adding stims...
  Number of stims on node 9: 5301 
  Number of stims on node 41: 5291 
  Number of stims on node 13: 5301 
  Number of stims on node 25: 5302 
  Number of stims on node 34: 5291 
  Number of stims on node 14: 5301 
  Number of stims on node 23: 5302 
  Number of stims on node 47: 5291 
  Number of stims on node 12: 5301 
  Number of stims on node 35: 5291 
  Number of stims on node 15: 5301 
  Number of stims on node 54: 5291 
  Number of stims on node 37: 5291 
  Number of stims on node 46: 5291 
  Number of stims on node 18: 5301 
  Number of stims on node 1: 5301 
  Number of stims on node 2: 5301 
  Number of stims on node 4: 5301 
  Number of stims on node 40: 5291 
  Number of stims on node 26: 5292 
  Number of stims on node 57: 5291 
  Number of stims on node 5: 5301 
  Number of stims on node 11: 5301 
  Number of stims on node 30: 5292 
  Number of stims on node 33: 5291 
  Number of stims on node 24: 5302 
  Number of stims on node 39: 5291 
  Number of stims on node 8: 5301 
  Number of stims on node 19: 5301 
  Number of stims on node 51: 5291 
  Number of stims on node 48: 5291 
  Number of stims on node 0: 5301 
  Number of stims on node 38: 5291 
  Number of stims on node 53: 5291 
  Number of stims on node 32: 5291 
  Number of stims on node 42: 5291 
  Number of stims on node 21: 5302 
  Number of stims on node 56: 5291 
  Number of stims on node 29: 5292 
  Number of stims on node 36: 5291 
  Number of stims on node 22: 5302 
  Number of stims on node 59: 5291 
  Number of stims on node 3: 5301 
  Number of stims on node 28: 5292 
  Number of stims on node 50: 5291 
  Number of stims on node 58: 5291 
  Number of stims on node 31: 5292 
  Number of stims on node 52: 5291 
  Number of stims on node 17: 5301 
  Number of stims on node 7: 5301 
  Number of stims on node 16: 5301 
  Number of stims on node 44: 5291 
  Number of stims on node 43: 5291 
  Number of stims on node 6: 5301 
  Number of stims on node 10: 5301 
  Number of stims on node 27: 5292 
  Number of stims on node 45: 5291 
  Number of stims on node 20: 5301 
  Number of stims on node 49: 5291 
  Number of stims on node 55: 5291 
  Done; cell stims creation time = 14.69 s.
Recording 18 traces of 1 types on node 12
Recording 17 traces of 1 types on node 54
Recording 17 traces of 1 types on node 51
Recording 16 traces of 1 types on node 47
Recording 13 traces of 1 types on node 1
Recording 18 traces of 1 types on node 8
Recording 10 traces of 1 types on node 2
Recording 16 traces of 1 types on node 57
Recording 13 traces of 1 types on node 11
Recording 21 traces of 1 types on node 13
Recording 12 traces of 1 types on node 23
Recording 8 traces of 1 types on node 37
Recording 17 traces of 1 types on node 14
Recording 16 traces of 1 types on node 53
Recording 20 traces of 1 types on node 4
Recording 21 traces of 1 types on node 24
Recording 12 traces of 1 types on node 46
Recording 13 traces of 1 types on node 41
Recording 17 traces of 1 types on node 35
Recording 16 traces of 1 types on node 9
Recording 20 traces of 1 types on node 40
Recording 17 traces of 1 types on node 30
Recording 13 traces of 1 types on node 25
Recording 14 traces of 1 types on node 38
Recording 10 traces of 1 types on node 48
Recording 19 traces of 1 types on node 5
Recording 15 traces of 1 types on node 34
Recording 19 traces of 1 types on node 26
Recording 17 traces of 1 types on node 0
Recording 19 traces of 1 types on node 18
Recording 13 traces of 1 types on node 19
Recording 17 traces of 1 types on node 15
Recording 15 traces of 1 types on node 39
Recording 14 traces of 1 types on node 33
Recording 19 traces of 1 types on node 42
Recording 16 traces of 1 types on node 32
Recording 17 traces of 1 types on node 7
Recording 19 traces of 1 types on node 45
Recording 14 traces of 1 types on node 29
Recording 20 traces of 1 types on node 3
Recording 14 traces of 1 types on node 49
Recording 22 traces of 1 types on node 22
Recording 17 traces of 1 types on node 52
Recording 14 traces of 1 types on node 56
Recording 18 traces of 1 types on node 36
Recording 14 traces of 1 types on node 44
Recording 15 traces of 1 types on node 50
Recording 16 traces of 1 types on node 43
Recording 12 traces of 1 types on node 21
Recording 19 traces of 1 types on node 55
Recording 20 traces of 1 types on node 28
Recording 17 traces of 1 types on node 16
Recording 13 traces of 1 types on node 59
Recording 20 traces of 1 types on node 6
Recording 19 traces of 1 types on node 17
Recording 11 traces of 1 types on node 58
Recording 17 traces of 1 types on node 31
Recording 13 traces of 1 types on node 10
Recording 12 traces of 1 types on node 20
Recording 18 traces of 1 types on node 27
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
57 /opt/anaconda3/bin/nrniv: i < size_
57  near line 0
57  tstop=300.0
            ^
        57 PtrVector[13].pset(174, ...)
      57 finitialize(-65)
--------------------------------------------------------------------------
MPI_ABORT was invoked on rank 57 in communicator MPI_COMM_WORLD
with errorcode -1.

NOTE: invoking MPI_ABORT causes Open MPI to kill all MPI processes.
You may or may not see output from other processes, depending on
exactly when Open MPI kills them.
--------------------------------------------------------------------------
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
39 /opt/anaconda3/bin/nrniv: i < size_
39  near line 0
39  tstop=300.0
            ^
        39 PtrVector[18].pset(164, ...)
      39 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
14 /opt/anaconda3/bin/nrniv: i < size_
14  near line 0
14  tstop=300.0
            ^
        14 PtrVector[14].pset(167, ...)
      14 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
46 /opt/anaconda3/bin/nrniv: i < size_
46  near line 0
46  tstop=300.0
            ^
        46 PtrVector[16].pset(103, ...)
      46 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
33 /opt/anaconda3/bin/nrniv: i < size_
33  near line 0
33  tstop=300.0
            ^
        33 PtrVector[23].pset(164, ...)
      33 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
42 /opt/anaconda3/bin/nrniv: i < size_
42  near line 0
42  tstop=300.0
            ^
        42 PtrVector[9].pset(102, ...)
      42 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
55 /opt/anaconda3/bin/nrniv: i < size_
55  near line 0
55  tstop=300.0
            ^
        55 PtrVector[18].pset(135, ...)
      55 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
3 /opt/anaconda3/bin/nrniv: i < size_
3  near line 0
3  tstop=300.0
            ^
        3 PtrVector[19].pset(135, ...)
      3 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
2 /opt/anaconda3/bin/nrniv: i < size_
2  near line 0
2  tstop=300.0
            ^
        2 PtrVector[17].pset(103, ...)
      2 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
58 /opt/anaconda3/bin/nrniv: i < size_
58  near line 0
58  tstop=300.0
            ^
        58 PtrVector[13].pset(174, ...)
      58 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
22 /opt/anaconda3/bin/nrniv: i < size_
22  near line 0
22  tstop=300.0
            ^
        22 PtrVector[16].pset(135, ...)
      22 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
43 /opt/anaconda3/bin/nrniv: i < size_
43  near line 0
43  tstop=300.0
            ^
        43 PtrVector[9].pset(102, ...)
      43 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
15 /opt/anaconda3/bin/nrniv: i < size_
15  near line 0
15  tstop=300.0
            ^
        15 PtrVector[18].pset(164, ...)
      15 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
34 /opt/anaconda3/bin/nrniv: i < size_
34  near line 0
34  tstop=300.0
            ^
        34 PtrVector[18].pset(164, ...)
      34 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
31 /opt/anaconda3/bin/nrniv: i < size_
31  near line 0
31  tstop=300.0
            ^
        31 PtrVector[18].pset(164, ...)
      31 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
24 /opt/anaconda3/bin/nrniv: i < size_
24  near line 0
24  tstop=300.0
            ^
        24 PtrVector[13].pset(156, ...)
      24 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
32 /opt/anaconda3/bin/nrniv: i < size_
32  near line 0
32  tstop=300.0
            ^
        32 PtrVector[18].pset(164, ...)
      32 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
7 /opt/anaconda3/bin/nrniv: i < size_
7  near line 0
7  tstop=300.0
            ^
        7 PtrVector[14].pset(174, ...)
      7 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
16 /opt/anaconda3/bin/nrniv: i < size_
16  near line 0
16  tstop=300.0
            ^
        16 PtrVector[13].pset(156, ...)
      16 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
28 /opt/anaconda3/bin/nrniv: i < size_
28  near line 0
28  tstop=300.0
            ^
        28 PtrVector[16].pset(135, ...)
      28 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
6 /opt/anaconda3/bin/nrniv: i < size_
6  near line 0
6  tstop=300.0
            ^
        6 PtrVector[14].pset(174, ...)
      6 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
26 /opt/anaconda3/bin/nrniv: i < size_
26  near line 0
26  tstop=300.0
            ^
        26 PtrVector[13].pset(156, ...)
      26 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
21 /opt/anaconda3/bin/nrniv: i < size_
21  near line 0
21  tstop=300.0
            ^
        21 PtrVector[18].pset(164, ...)
      21 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
20 /opt/anaconda3/bin/nrniv: i < size_
20  near line 0
20  tstop=300.0
            ^
        20 PtrVector[16].pset(135, ...)
      20 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
23 /opt/anaconda3/bin/nrniv: i < size_
23  near line 0
23  tstop=300.0
            ^
        23 PtrVector[18].pset(164, ...)
      23 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
52 /opt/anaconda3/bin/nrniv: i < size_
52  near line 0
52  tstop=300.0
            ^
        52 PtrVector[12].pset(135, ...)
      52 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
17 /opt/anaconda3/bin/nrniv: i < size_
17  near line 0
17  tstop=300.0
            ^
        17 PtrVector[13].pset(156, ...)
      17 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
4 /opt/anaconda3/bin/nrniv: i < size_
4  near line 0
4  tstop=300.0
            ^
        4 PtrVector[14].pset(174, ...)
      4 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
25 /opt/anaconda3/bin/nrniv: i < size_
25  near line 0
25  tstop=300.0
            ^
        25 PtrVector[13].pset(156, ...)
      25 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
10 /opt/anaconda3/bin/nrniv: i < size_
10  near line 0
10  tstop=300.0
            ^
        10 PtrVector[19].pset(202, ...)
      10 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
30 /opt/anaconda3/bin/nrniv: i < size_
30  near line 0
30  tstop=300.0
            ^
        30 PtrVector[16].pset(103, ...)
      30 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
27 /opt/anaconda3/bin/nrniv: i < size_
27  near line 0
27  tstop=300.0
            ^
        27 PtrVector[13].pset(156, ...)
      27 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
37 /opt/anaconda3/bin/nrniv: i < size_
37  near line 0
37  tstop=300.0
            ^
        37 PtrVector[16].pset(103, ...)
      37 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
13 /opt/anaconda3/bin/nrniv: i < size_
13  near line 0
13  tstop=300.0
            ^
        13 PtrVector[14].pset(167, ...)
      13 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
0 /opt/anaconda3/bin/nrniv: i < size_
0  near line 0
0  tstop=300.0
            ^
        0 PtrVector[17].pset(103, ...)
      0 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
5 /opt/anaconda3/bin/nrniv: i < size_
5  near line 0
5  tstop=300.0
            ^
        5 PtrVector[14].pset(174, ...)
      5 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
53 /opt/anaconda3/bin/nrniv: i < size_
53  near line 0
53  tstop=300.0
            ^
        53 PtrVector[16].pset(103, ...)
      53 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
41 /opt/anaconda3/bin/nrniv: i < size_
41  near line 0
41  tstop=300.0
            ^
        41 PtrVector[9].pset(102, ...)
      41 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
8 /opt/anaconda3/bin/nrniv: i < size_
8  near line 0
8  tstop=300.0
            ^
        8 PtrVector[19].pset(202, ...)
      8 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
40 /opt/anaconda3/bin/nrniv: i < size_
40  near line 0
40  tstop=300.0
            ^
        40 PtrVector[9].pset(102, ...)
      40 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
11 /opt/anaconda3/bin/nrniv: i < size_
11  near line 0
11  tstop=300.0
            ^
        11 PtrVector[19].pset(202, ...)
      11 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
19 /opt/anaconda3/bin/nrniv: i < size_
19  near line 0
19  tstop=300.0
            ^
        19 PtrVector[13].pset(156, ...)
      19 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
44 /opt/anaconda3/bin/nrniv: i < size_
44  near line 0
44  tstop=300.0
            ^
        44 PtrVector[16].pset(103, ...)
      44 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
49 /opt/anaconda3/bin/nrniv: i < size_
49  near line 0
49  tstop=300.0
            ^
        49 PtrVector[15].pset(164, ...)
      49 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
35 /opt/anaconda3/bin/nrniv: i < size_
35  near line 0
35  tstop=300.0
            ^
        35 PtrVector[9].pset(102, ...)
      35 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
48 /opt/anaconda3/bin/nrniv: i < size_
48  near line 0
48  tstop=300.0
            ^
        48 PtrVector[15].pset(164, ...)
      48 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
18 /opt/anaconda3/bin/nrniv: i < size_
18  near line 0
18  tstop=300.0
            ^
        18 PtrVector[13].pset(156, ...)
      18 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
47 /opt/anaconda3/bin/nrniv: i < size_
47  near line 0
47  tstop=300.0
            ^
        47 PtrVector[18].pset(164, ...)
      47 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
45 /opt/anaconda3/bin/nrniv: i < size_
45  near line 0
45  tstop=300.0
            ^
        45 PtrVector[10].pset(88, ...)
      45 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
12 /opt/anaconda3/bin/nrniv: i < size_
12  near line 0
12  tstop=300.0
            ^
        12 PtrVector[14].pset(167, ...)
      12 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
50 /opt/anaconda3/bin/nrniv: i < size_
50  near line 0
50  tstop=300.0
            ^
        50 PtrVector[15].pset(164, ...)
      50 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
9 /opt/anaconda3/bin/nrniv: i < size_
9  near line 0
9  tstop=300.0
            ^
        9 PtrVector[19].pset(202, ...)
      9 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
38 /opt/anaconda3/bin/nrniv: i < size_
38  near line 0
38  tstop=300.0
            ^
        38 PtrVector[16].pset(103, ...)
      38 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
1 /opt/anaconda3/bin/nrniv: i < size_
1  near line 0
1  tstop=300.0
            ^
        1 PtrVector[17].pset(103, ...)
      1 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
54 /opt/anaconda3/bin/nrniv: i < size_
54  near line 0
54  tstop=300.0
            ^
        54 PtrVector[16].pset(103, ...)
      54 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
36 /opt/anaconda3/bin/nrniv: i < size_
36  near line 0
36  tstop=300.0
            ^
        36 PtrVector[14].pset(99, ...)
      36 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
51 /opt/anaconda3/bin/nrniv: i < size_
51  near line 0
51  tstop=300.0
            ^
        51 PtrVector[1].pset(72, ...)
      51 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
56 /opt/anaconda3/bin/nrniv: i < size_
56  near line 0
56  tstop=300.0
            ^
        56 PtrVector[13].pset(174, ...)
      56 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
29 /opt/anaconda3/bin/nrniv: i < size_
29  near line 0
29  tstop=300.0
            ^
        29 PtrVector[18].pset(164, ...)
      29 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
59 /opt/anaconda3/bin/nrniv: i < size_
59  near line 0
59  tstop=300.0
            ^
        59 PtrVector[13].pset(174, ...)
      59 finitialize(-65)
[cycle:2148213] 59 more processes have sent help message help-mpi-api.txt / mpi-abort
[cycle:2148213] Set MCA parameter "orte_base_help_aggregate" to 0 to see all help / error messages

*** check if errors gone without dipole recording/setup

mpiexec -n 60 --use-hwthread-cpus nrniv -python -mpi init.py

started ~21:38 ...

yes, errors gone now ... though get an error with rasterplot 

**** output


Running simulation using NEURON for 300.0 ms...
0.1s
0.2s
0.3s
  Done; run time = 8970.40 s; real-time ratio: 0.00.

Gathering data...
  Done; gather time = 10.49 s.

Analyzing...
>>> 
>>> 
>>> >>> >>> >>> 

>>> >>> >>> >>> >>> >>> >>> >>> 

>>> 

>>> >>> 

>>> >>> 
>>> >>> >>> 

>>> >>> >>> >>> >>> 
>>> 
>>> >>> 
>>> >>> 

>>> 
>>> >>> 
>>> >>> 
>>> 
>>> >>> 




>>> 
>>> 


>>> 
>>> 
>>> >>> >>> 
>>> 


>>> 


>>> >>> >>> 

>>> >>> 
>>> 




>>> >>> 



>>> 


>>> 



  Cells: 38612
  Connections: 0 (0.00 per cell)
  Spikes: 161310 (13.93 Hz)
  Simulated time: 0.3 s; 60 workers
  Run time: 8970.40 s
   L1_DAC_bNA : 1.754 Hz
   L1_DAC_cNA : 1.368 Hz
   L1_DLAC_cNA : 1.111 Hz
   L1_HAC_bNA : 0.877 Hz
   L1_HAC_cIR : 0.667 Hz
   L1_HAC_cNA : 1.237 Hz
   L1_NGC-DA_bNA : 1.250 Hz
   L1_NGC-DA_cAC : 2.083 Hz
   L1_NGC-DA_cNA : 2.431 Hz
   L1_NGC-DA_cST : 1.667 Hz
   L1_NGC-SA_cNA : 2.436 Hz
   L1_SLAC_bNA : 2.381 Hz
   L1_SLAC_cAC : 1.250 Hz
   L1_SLAC_cNA : 1.228 Hz
   L23_BP_bAC : 8.889 Hz
   L23_BP_bIR : 7.500 Hz
   L23_BP_bNA : 14.762 Hz
   L23_BP_cAC : 16.667 Hz
   L23_BP_cNA : 15.833 Hz
   L23_BP_dST : 10.000 Hz
   L23_BTC_bAC : 3.778 Hz
   L23_BTC_bIR : 3.333 Hz
   L23_BTC_bNA : 4.058 Hz
   L23_BTC_cAC : 2.114 Hz
   L23_BTC_cNA : 4.630 Hz
   L23_ChC_cAC : 8.986 Hz
   L23_ChC_cNA : 7.971 Hz
   L23_ChC_dNA : 4.667 Hz
   L23_DBC_bAC : 6.944 Hz
   L23_DBC_bIR : 3.438 Hz
   L23_DBC_bNA : 10.381 Hz
   L23_DBC_cAC : 7.322 Hz
   L23_LBC_bAC : 1.905 Hz
   L23_LBC_bNA : 16.173 Hz
   L23_LBC_cAC : 4.198 Hz
   L23_LBC_cNA : 5.658 Hz
   L23_LBC_cST : 9.545 Hz
   L23_LBC_dNA : 12.819 Hz
   L23_MC_bAC : 0.667 Hz
   L23_MC_bNA : 2.333 Hz
   L23_MC_cAC : 0.654 Hz
   L23_MC_cNA : 1.010 Hz
   L23_MC_dNA : 0.000 Hz
   L23_NBC_bAC : 0.952 Hz
   L23_NBC_bNA : 11.111 Hz
   L23_NBC_cAC : 2.923 Hz
   L23_NBC_cIR : 2.778 Hz
   L23_NBC_cNA : 2.833 Hz
   L23_NBC_dNA : 5.052 Hz
   L23_NGC_bNA : 4.667 Hz
   L23_NGC_cAC : 3.333 Hz
   L23_NGC_cNA : 3.902 Hz
   L23_NGC_cST : 3.333 Hz
   L23_PC_cAD : 3.518 Hz
   L23_SBC_bNA : 16.056 Hz
   L23_SBC_cAC : 15.722 Hz
   L23_SBC_dNA : 11.159 Hz
   L4_BP_bAC : 23.333 Hz
   L4_BP_bIR : 20.000 Hz
   L4_BP_bNA : 26.667 Hz
   L4_BP_cAC : 21.667 Hz
   L4_BP_cNA : 30.000 Hz
   L4_BP_dST : 3.333 Hz
   L4_BTC_bAC : 11.667 Hz
   L4_BTC_bIR : 5.000 Hz
   L4_BTC_bST : 15.000 Hz
   L4_BTC_cAC : 17.778 Hz
   L4_BTC_cNA : 14.444 Hz
   L4_BTC_dNA : 6.667 Hz
   L4_ChC_cAC : 46.667 Hz
   L4_ChC_cNA : 40.000 Hz
   L4_ChC_dNA : 11.667 Hz
   L4_DBC_bAC : 16.667 Hz
   L4_DBC_bIR : 3.333 Hz
   L4_DBC_bNA : 13.333 Hz
   L4_DBC_bST : 5.000 Hz
   L4_DBC_cAC : 9.167 Hz
   L4_DBC_cIR : 4.762 Hz
   L4_DBC_cNA : 11.667 Hz
   L4_LBC_cAC : 33.182 Hz
   L4_LBC_cNA : 27.857 Hz
   L4_LBC_cST : 28.495 Hz
   L4_LBC_dNA : 39.420 Hz
   L4_LBC_dST : 28.889 Hz
   L4_MC_bAC : 0.909 Hz
   L4_MC_bNA : 1.667 Hz
   L4_MC_cAC : 1.276 Hz
   L4_MC_cNA : 1.667 Hz
   L4_MC_dNA : 1.667 Hz
   L4_NBC_cAC : 34.000 Hz
   L4_NBC_cIR : 20.000 Hz
   L4_NBC_cNA : 35.037 Hz
   L4_NBC_dNA : 33.704 Hz
   L4_NGC_bNA : 13.333 Hz
   L4_NGC_cAC : 13.333 Hz
   L4_NGC_cNA : 13.333 Hz
   L4_NGC_cST : 3.333 Hz
   L4_PC_cAD : 12.771 Hz
   L4_SBC_bNA : 52.381 Hz
   L4_SBC_cAC : 42.424 Hz
   L4_SBC_dNA : 42.941 Hz
   L4_SP_cAD : 15.249 Hz
   L4_SS_cAD : 17.184 Hz
   L5_BP_bAC : 40.000 Hz
   L5_BP_bIR : 15.333 Hz
   L5_BP_bNA : 54.074 Hz
   L5_BP_cAC : 44.815 Hz
   L5_BP_cNA : 47.333 Hz
   L5_BP_dST : 12.222 Hz
   L5_BTC_bAC : 30.769 Hz
   L5_BTC_cAC : 30.200 Hz
   L5_BTC_cNA : 37.692 Hz
   L5_ChC_cAC : 63.333 Hz
   L5_ChC_cNA : 57.143 Hz
   L5_ChC_dNA : 47.333 Hz
   L5_DBC_bAC : 20.741 Hz
   L5_DBC_bIR : 5.392 Hz
   L5_DBC_bNA : 23.704 Hz
   L5_DBC_bST : 13.333 Hz
   L5_DBC_cAC : 28.148 Hz
   L5_DBC_cIR : 11.373 Hz
   L5_DBC_cNA : 29.630 Hz
   L5_LBC_bAC : 26.944 Hz
   L5_LBC_cAC : 45.333 Hz
   L5_LBC_cIR : 20.256 Hz
   L5_LBC_cNA : 52.703 Hz
   L5_LBC_cST : 45.225 Hz
   L5_LBC_dNA : 51.802 Hz
   L5_LBC_dST : 39.184 Hz
   L5_MC_bAC : 6.805 Hz
   L5_MC_bIR : 3.788 Hz
   L5_MC_bST : 4.792 Hz
   L5_MC_cAC : 13.545 Hz
   L5_MC_cNA : 9.375 Hz
   L5_MC_cST : 3.333 Hz
   L5_MC_dNA : 3.750 Hz
   L5_NBC_bAC : 24.286 Hz
   L5_NBC_bIR : 14.524 Hz
   L5_NBC_bST : 44.691 Hz
   L5_NBC_cAC : 53.917 Hz
   L5_NBC_cIR : 32.619 Hz
   L5_NBC_cNA : 48.462 Hz
   L5_NBC_cST : 43.083 Hz
   L5_NBC_dST : 39.744 Hz
   L5_NGC_bNA : 3.333 Hz
   L5_NGC_cAC : 50.000 Hz
   L5_NGC_cNA : 40.000 Hz
   L5_NGC_cST : 10.000 Hz
   L5_SBC_bNA : 53.704 Hz
   L5_SBC_cAC : 43.704 Hz
   L5_SBC_dNA : 57.143 Hz
   L5_STPC_cAD : 17.152 Hz
   L5_TTPC1_cAD : 19.212 Hz
   L5_TTPC2_cAD : 20.088 Hz
   L5_UTPC_cAD : 23.246 Hz
   L6_BPC_cAD : 15.793 Hz
   L6_BP_bAC : 27.222 Hz
   L6_BP_bIR : 7.333 Hz
   L6_BP_bNA : 39.123 Hz
   L6_BP_cAC : 38.246 Hz
   L6_BP_cNA : 39.667 Hz
   L6_BP_dST : 7.778 Hz
   L6_BTC_bAC : 22.667 Hz
   L6_BTC_cAC : 28.333 Hz
   L6_BTC_cNA : 39.000 Hz
   L6_ChC_cAC : 37.222 Hz
   L6_ChC_cNA : 70.000 Hz
   L6_ChC_dNA : 45.833 Hz
   L6_DBC_bAC : 22.222 Hz
   L6_DBC_bIR : 7.667 Hz
   L6_DBC_bNA : 14.444 Hz
   L6_DBC_bST : 7.778 Hz
   L6_DBC_cAC : 30.000 Hz
   L6_DBC_cIR : 13.333 Hz
   L6_DBC_cNA : 14.444 Hz
   L6_IPC_cAD : 13.055 Hz
   L6_LBC_bAC : 20.000 Hz
   L6_LBC_bIR : 11.785 Hz
   L6_LBC_bNA : 71.473 Hz
   L6_LBC_bST : 45.968 Hz
   L6_LBC_cNA : 51.667 Hz
   L6_LBC_cST : 34.729 Hz
   L6_MC_bAC : 3.740 Hz
   L6_MC_bIR : 1.862 Hz
   L6_MC_bNA : 5.476 Hz
   L6_MC_bST : 1.905 Hz
   L6_MC_cAC : 8.865 Hz
   L6_MC_cIR : 1.905 Hz
   L6_MC_cNA : 6.429 Hz
   L6_NBC_bAC : 24.048 Hz
   L6_NBC_bIR : 15.476 Hz
   L6_NBC_bST : 50.123 Hz
   L6_NBC_cAC : 34.274 Hz
   L6_NBC_cIR : 17.143 Hz
   L6_NBC_cNA : 42.883 Hz
   L6_NBC_cST : 36.923 Hz
   L6_NBC_dST : 42.143 Hz
   L6_NGC_bNA : 30.000 Hz
   L6_NGC_cAC : 46.667 Hz
   L6_NGC_cNA : 40.000 Hz
   L6_NGC_cST : 11.667 Hz
   L6_SBC_bNA : 51.667 Hz
   L6_SBC_cAC : 57.639 Hz
   L6_SBC_dNA : 39.649 Hz
   L6_TPC_L1_cAD : 15.072 Hz
   L6_TPC_L4_cAD : 16.051 Hz
   L6_UTPC_cAD : 16.192 Hz
   ss_RTN_o : 12.585 Hz
   ss_RTN_m : 15.463 Hz
   ss_RTN_i : 12.784 Hz
   VPL_sTC : 12.073 Hz
   VPM_sTC : 15.272 Hz
   POm_sTC_s1 : 17.211 Hz
Saving output as ../data/v6_batch0_25feb22/v6_batch0_25feb22_data.pkl ... 
Finished saving!
  Done; saving time = 1.90 s.
Preparing spike data...
Plotting raster...
  There was an exception in plotRaster(): 
    addLegend() got multiple values for argument 'labels' 
    (<class 'TypeError'>, TypeError("addLegend() got multiple values for argument 'labels'"), <traceback object at 0x7fc8b2988b40>)
Plotting recorded cell traces ... cell
  Done; plotting time = 538.69 s

Total time = 29845.46 s

* 28feb22
** restore current dipole recording to debug
* 02mar22
** try dipole without cells/pops -- to see if memory issue (sal suggestion)

mpiexec -n 60 --use-hwthread-cpus nrniv -python -mpi init.py

started ~10:26 ... 

*** still get error

Recording 15 traces of 1 types on node 50
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
51 /opt/anaconda3/bin/nrniv: i < size_
51  near line 0
51  tstop=300.0
            ^
        51 PtrVector[1].pset(72, ...)
      51 finitialize(-65)
--------------------------------------------------------------------------
MPI_ABORT was invoked on rank 51 in communicator MPI_COMM_WORLD
with errorcode -1.

NOTE: invoking MPI_ABORT causes Open MPI to kill all MPI processes.
You may or may not see output from other processes, depending on
exactly when Open MPI kills them.
--------------------------------------------------------------------------
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
5 /opt/anaconda3/bin/nrniv: i < size_
5  near line 0
5  tstop=300.0
            ^
        5 PtrVector[14].pset(174, ...)
      5 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
55 /opt/anaconda3/bin/nrniv: i < size_
55  near line 0
55  tstop=300.0
            ^
        55 PtrVector[18].pset(135, ...)
      55 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
39 /opt/anaconda3/bin/nrniv: i < size_
39  near line 0
39  tstop=300.0
            ^
        39 PtrVector[18].pset(164, ...)
      39 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
56 /opt/anaconda3/bin/nrniv: i < size_
56  near line 0
56  tstop=300.0
            ^
        56 PtrVector[13].pset(174, ...)
      56 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
37 /opt/anaconda3/bin/nrniv: i < size_
37  near line 0
37  tstop=300.0
            ^
        37 PtrVector[16].pset(103, ...)
      37 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
0 /opt/anaconda3/bin/nrniv: i < size_
0  near line 0
0  tstop=300.0
            ^
        0 PtrVector[17].pset(103, ...)
      0 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
46 /opt/anaconda3/bin/nrniv: i < size_
46  near line 0
46  tstop=300.0
            ^
        46 PtrVector[16].pset(103, ...)
      46 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
42 /opt/anaconda3/bin/nrniv: i < size_
42  near line 0
42  tstop=300.0
            ^
        42 PtrVector[9].pset(102, ...)
      42 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
24 /opt/anaconda3/bin/nrniv: i < size_
24  near line 0
24  tstop=300.0
            ^
        24 PtrVector[13].pset(156, ...)
      24 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
4 /opt/anaconda3/bin/nrniv: i < size_
4  near line 0
4  tstop=300.0
            ^
        4 PtrVector[14].pset(174, ...)
      4 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
33 /opt/anaconda3/bin/nrniv: i < size_
33  near line 0
33  tstop=300.0
            ^
        33 PtrVector[23].pset(164, ...)
      33 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
58 /opt/anaconda3/bin/nrniv: i < size_
58  near line 0
58  tstop=300.0
            ^
        58 PtrVector[13].pset(174, ...)
      58 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
32 /opt/anaconda3/bin/nrniv: i < size_
32  near line 0
32  tstop=300.0
            ^
        32 PtrVector[18].pset(164, ...)
      32 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
53 /opt/anaconda3/bin/nrniv: i < size_
53  near line 0
53  tstop=300.0
            ^
        53 PtrVector[16].pset(103, ...)
      53 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
36 /opt/anaconda3/bin/nrniv: i < size_
36  near line 0
36  tstop=300.0
            ^
        36 PtrVector[14].pset(99, ...)
      36 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
48 /opt/anaconda3/bin/nrniv: i < size_
48  near line 0
48  tstop=300.0
            ^
        48 PtrVector[15].pset(164, ...)
      48 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
29 /opt/anaconda3/bin/nrniv: i < size_
29  near line 0
29  tstop=300.0
            ^
        29 PtrVector[18].pset(164, ...)
      29 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
2 /opt/anaconda3/bin/nrniv: i < size_
2  near line 0
2  tstop=300.0
            ^
        2 PtrVector[17].pset(103, ...)
      2 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
31 /opt/anaconda3/bin/nrniv: i < size_
31  near line 0
31  tstop=300.0
            ^
        31 PtrVector[18].pset(164, ...)
      31 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
6 /opt/anaconda3/bin/nrniv: i < size_
6  near line 0
6  tstop=300.0
            ^
        6 PtrVector[14].pset(174, ...)
      6 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
19 /opt/anaconda3/bin/nrniv: i < size_
19  near line 0
19  tstop=300.0
            ^
        19 PtrVector[13].pset(156, ...)
      19 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
21 /opt/anaconda3/bin/nrniv: i < size_
21  near line 0
21  tstop=300.0
            ^
        21 PtrVector[18].pset(164, ...)
      21 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
26 /opt/anaconda3/bin/nrniv: i < size_
26  near line 0
26  tstop=300.0
            ^
        26 PtrVector[13].pset(156, ...)
      26 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
23 /opt/anaconda3/bin/nrniv: i < size_
23  near line 0
23  tstop=300.0
            ^
        23 PtrVector[18].pset(164, ...)
      23 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
14 /opt/anaconda3/bin/nrniv: i < size_
14  near line 0
14  tstop=300.0
            ^
        14 PtrVector[14].pset(167, ...)
      14 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
10 /opt/anaconda3/bin/nrniv: i < size_
10  near line 0
10  tstop=300.0
            ^
        10 PtrVector[19].pset(202, ...)
      10 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
13 /opt/anaconda3/bin/nrniv: i < size_
13  near line 0
13  tstop=300.0
            ^
        13 PtrVector[14].pset(167, ...)
      13 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
25 /opt/anaconda3/bin/nrniv: i < size_
25  near line 0
25  tstop=300.0
            ^
        25 PtrVector[13].pset(156, ...)
      25 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
52 /opt/anaconda3/bin/nrniv: i < size_
52  near line 0
52  tstop=300.0
            ^
        52 PtrVector[12].pset(135, ...)
      52 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
8 /opt/anaconda3/bin/nrniv: i < size_
8  near line 0
8  tstop=300.0
            ^
        8 PtrVector[19].pset(202, ...)
      8 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
27 /opt/anaconda3/bin/nrniv: i < size_
27  near line 0
27  tstop=300.0
            ^
        27 PtrVector[13].pset(156, ...)
      27 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
1 /opt/anaconda3/bin/nrniv: i < size_
1  near line 0
1  tstop=300.0
            ^
        1 PtrVector[17].pset(103, ...)
      1 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
20 /opt/anaconda3/bin/nrniv: i < size_
20  near line 0
20  tstop=300.0
            ^
        20 PtrVector[16].pset(135, ...)
      20 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
28 /opt/anaconda3/bin/nrniv: i < size_
28  near line 0
28  tstop=300.0
            ^
        28 PtrVector[16].pset(135, ...)
      28 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
43 /opt/anaconda3/bin/nrniv: i < size_
43  near line 0
43  tstop=300.0
            ^
        43 PtrVector[9].pset(102, ...)
      43 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
15 /opt/anaconda3/bin/nrniv: i < size_
15  near line 0
15  tstop=300.0
            ^
        15 PtrVector[18].pset(164, ...)
      15 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
57 /opt/anaconda3/bin/nrniv: i < size_
57  near line 0
57  tstop=300.0
            ^
        57 PtrVector[13].pset(174, ...)
      57 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
18 /opt/anaconda3/bin/nrniv: i < size_
18  near line 0
18  tstop=300.0
            ^
        18 PtrVector[13].pset(156, ...)
      18 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
22 /opt/anaconda3/bin/nrniv: i < size_
22  near line 0
22  tstop=300.0
            ^
        22 PtrVector[16].pset(135, ...)
      22 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
49 /opt/anaconda3/bin/nrniv: i < size_
49  near line 0
49  tstop=300.0
            ^
        49 PtrVector[15].pset(164, ...)
      49 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
7 /opt/anaconda3/bin/nrniv: i < size_
7  near line 0
7  tstop=300.0
            ^
        7 PtrVector[14].pset(174, ...)
      7 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
47 /opt/anaconda3/bin/nrniv: i < size_
47  near line 0
47  tstop=300.0
            ^
        47 PtrVector[18].pset(164, ...)
      47 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
45 /opt/anaconda3/bin/nrniv: i < size_
45  near line 0
45  tstop=300.0
            ^
        45 PtrVector[10].pset(88, ...)
      45 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
11 /opt/anaconda3/bin/nrniv: i < size_
11  near line 0
11  tstop=300.0
            ^
        11 PtrVector[19].pset(202, ...)
      11 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
17 /opt/anaconda3/bin/nrniv: i < size_
17  near line 0
17  tstop=300.0
            ^
        17 PtrVector[13].pset(156, ...)
      17 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
38 /opt/anaconda3/bin/nrniv: i < size_
38  near line 0
38  tstop=300.0
            ^
        38 PtrVector[16].pset(103, ...)
      38 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
44 /opt/anaconda3/bin/nrniv: i < size_
44  near line 0
44  tstop=300.0
            ^
        44 PtrVector[16].pset(103, ...)
      44 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
30 /opt/anaconda3/bin/nrniv: i < size_
30  near line 0
30  tstop=300.0
            ^
        30 PtrVector[16].pset(103, ...)
      30 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
40 /opt/anaconda3/bin/nrniv: i < size_
40  near line 0
40  tstop=300.0
            ^
        40 PtrVector[9].pset(102, ...)
      40 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
50 /opt/anaconda3/bin/nrniv: i < size_
50  near line 0
50  tstop=300.0
            ^
        50 PtrVector[15].pset(164, ...)
      50 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
9 /opt/anaconda3/bin/nrniv: i < size_
9  near line 0
9  tstop=300.0
            ^
        9 PtrVector[19].pset(202, ...)
      9 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
35 /opt/anaconda3/bin/nrniv: i < size_
35  near line 0
35  tstop=300.0
            ^
        35 PtrVector[9].pset(102, ...)
      35 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
3 /opt/anaconda3/bin/nrniv: i < size_
3  near line 0
3  tstop=300.0
            ^
        3 PtrVector[19].pset(135, ...)
      3 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
54 /opt/anaconda3/bin/nrniv: i < size_
54  near line 0
54  tstop=300.0
            ^
        54 PtrVector[16].pset(103, ...)
      54 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
34 /opt/anaconda3/bin/nrniv: i < size_
34  near line 0
34  tstop=300.0
            ^
        34 PtrVector[18].pset(164, ...)
      34 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
41 /opt/anaconda3/bin/nrniv: i < size_
41  near line 0
41  tstop=300.0
            ^
        41 PtrVector[9].pset(102, ...)
      41 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
16 /opt/anaconda3/bin/nrniv: i < size_
16  near line 0
16  tstop=300.0
            ^
        16 PtrVector[13].pset(156, ...)
      16 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
12 /opt/anaconda3/bin/nrniv: i < size_
12  near line 0
12  tstop=300.0
            ^
        12 PtrVector[14].pset(167, ...)
      12 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
59 /opt/anaconda3/bin/nrniv: i < size_
59  near line 0
59  tstop=300.0
            ^
        59 PtrVector[13].pset(174, ...)
      59 finitialize(-65)
[cycle:1578782] 59 more processes have sent help message help-mpi-api.txt / mpi-abort
[cycle:1578782] Set MCA parameter "orte_base_help_aggregate" to 0 to see all help / error messagesr

* 03mar22
** try distributed saving -- check A1 model init.py

put this into init.py : 

# distributed saving (to avoid errors with large output data)
sim.saveDataInNodes()
sim.gatherDataFromFiles()
sim.saveData() 

mpiexec -n 60 --use-hwthread-cpus nrniv -python -mpi init.py

started ~13:58 ...

same problem, as expected:

Recording 10 traces of 1 types on node 2
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
56 /opt/anaconda3/bin/nrniv: i < size_
56  near line 0
56  tstop=300.0
            ^
        56 PtrVector[13].pset(174, ...)
      56 finitialize(-65)
--------------------------------------------------------------------------
MPI_ABORT was invoked on rank 56 in communicator MPI_COMM_WORLD
with errorcode -1.

NOTE: invoking MPI_ABORT causes Open MPI to kill all MPI processes.
You may or may not see output from other processes, depending on
exactly when Open MPI kills them.
--------------------------------------------------------------------------
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
39 /opt/anaconda3/bin/nrniv: i < size_
39  near line 0
39  tstop=300.0
            ^
        39 PtrVector[18].pset(164, ...)
      39 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
28 /opt/anaconda3/bin/nrniv: i < size_
28  near line 0
28  tstop=300.0
            ^

* 04mar22
** try same run as previous but with 40 cores instead of 60

mpiexec -n 40 --use-hwthread-cpus nrniv -python -mpi init.py

had to interrupt ... will restart later

* 21mar22
** try lower density model (cfg.scaleDensity=0.1)

cfg.scaleDensity = 0.1 # 1.0 # Number of cells = 31346
cfg.simLabel = 'v6_batch0_21mar22_LowDensityA'

mpiexec -n 30 --use-hwthread-cpus nrniv -python -mpi init.py

started ~10:27 ...

*** still get error

Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
2 /opt/anaconda3/bin/nrniv: i < size_
2  near line 0
2  tstop=300.0
            ^
        2 PtrVector[7].pset(292, ...)
      2 finitialize(-65)
--------------------------------------------------------------------------
MPI_ABORT was invoked on rank 2 in communicator MPI_COMM_WORLD
with errorcode -1.

NOTE: invoking MPI_ABORT causes Open MPI to kill all MPI processes.
You may or may not see output from other processes, depending on
exactly when Open MPI kills them.
--------------------------------------------------------------------------
[cycle:3425871] PMIX ERROR: UNREACHABLE in file server/pmix_server.c at line 2147
[cycle:3425871] PMIX ERROR: UNREACHABLE in file server/pmix_server.c at line 2147
[cycle:3425871] PMIX ERROR: UNREACHABLE in file server/pmix_server.c at line 2147
[cycle:3425871] PMIX ERROR: UNREACHABLE in file server/pmix_server.c at line 2147
[cycle:3425871] PMIX ERROR: UNREACHABLE in file server/pmix_server.c at line 2147
[cycle:3425871] PMIX ERROR: UNREACHABLE in file server/pmix_server.c at line 2147
[cycle:3425871] PMIX ERROR: UNREACHABLE in file server/pmix_server.c at line 2147
[cycle:3425871] PMIX ERROR: UNREACHABLE in file server/pmix_server.c at line 2147
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
25 /opt/anaconda3/bin/nrniv: i < size_
25  near line 0
25  tstop=300.0
            ^
        25 PtrVector[6].pset(294, ...)
      25 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
1 /opt/anaconda3/bin/nrniv: i < size_
1  near line 0
1  tstop=300.0
            ^
        1 PtrVector[7].pset(294, ...)
      1 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
13 /opt/anaconda3/bin/nrniv: i < size_
13  near line 0
13  tstop=300.0
            ^
** try even lower density model (cfg.scaleDensity=0.05)

cfg.scaleDensity = 0.05 # 1.0 # Number of cells = 31346
cfg.simLabel = 'v6_batch0_21mar22_LowDensityB'

mpiexec -n 30 --use-hwthread-cpus nrniv -python -mpi init.py

started ~10:55 ...

*** same error

Recording 13 traces of 1 types on node 3
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
12 /opt/anaconda3/bin/nrniv: i < size_
12  near line 0
12  tstop=300.0
            ^
        12 PtrVector[4].pset(294, ...)
      12 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
13 /opt/anaconda3/bin/nrniv: i < size_
13  near line 0
13  tstop=300.0
            ^
        13 PtrVector[4].pset(294, ...)
      13 finitialize(-65)
--------------------------------------------------------------------------
MPI_ABORT was invoked on rank 12 in communicator MPI_COMM_WORLD
with errorcode -1.

NOTE: invoking MPI_ABORT causes Open MPI to kill all MPI processes.
You may or may not see output from other processes, depending on
exactly when Open MPI kills them.
--------------------------------------------------------------------------
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
14 /opt/anaconda3/bin/nrniv: i < size_
14  near line 0
14  tstop=300.0
            ^
        14 PtrVector[4].pset(294, ...)
      14 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
19 /opt/anaconda3/bin/nrniv: i < size_
19  near line 0
19  tstop=300.0
            ^
        19 PtrVector[4].pset(292, ...)

** try even lower density model (cfg.scaleDensity=0.01)

cfg.scaleDensity = 0.01 # 1.0 # Number of cells = 31346
cfg.simLabel = 'v6_batch0_21mar22_LowDensityC'

mpiexec -n 30 --use-hwthread-cpus nrniv -python -mpi init.py

started ~11:15 ...

produces same error (below); does not look like an issue of using too much RAM given that
each process (out of 30) is only using ~0.2-0.3 of total system RAM at the time of the crash

*** same error

Recording 7 traces of 1 types on node 3
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
29 /opt/anaconda3/bin/nrniv: i < size_
29  near line 0
29  tstop=300.0
            ^
        29 PtrVector[1].pset(292, ...)
      29 finitialize(-65)
--------------------------------------------------------------------------
MPI_ABORT was invoked on rank 29 in communicator MPI_COMM_WORLD
with errorcode -1.

NOTE: invoking MPI_ABORT causes Open MPI to kill all MPI processes.
You may or may not see output from other processes, depending on
exactly when Open MPI kills them.
--------------------------------------------------------------------------
[cycle:3453767] PMIX ERROR: UNREACHABLE in file server/pmix_server.c at line 2147
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
1 /opt/anaconda3/bin/nrniv: i < size_
1  near line 0
1  tstop=300.0
            ^
        1 PtrVector[2].pset(292, ...)
      1 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
2 /opt/anaconda3/bin/nrniv: i < size_
2  near line 0
2  tstop=300.0
            ^
        2 PtrVector[2].pset(292, ...)
      2 finitialize(-65)
Assertion failed: file /root/nrn/src/ivoc/ocptrvector.cpp, line 75
3 /opt/anaconda3/bin/nrniv: i < size_
3  near line 0
3  tstop=300.0
            ^
** FB suggests scaling sizeX,sizeZ as well as scaleDensity

for example:
cfg.sizeX = 420.0/7.0 # r = 210 um and hexagonal side length = 230.9 um
cfg.sizeZ = 420.0/7.0
cfg.scaleDensity = 1.0/49.0 # Number of cells = 31346

and for 30 cores configure so has scaleDensity = ~0.0025

0.0025 = 1 / x**2 = 1 / 20**2

cfg.scale = 1.0 # reduce size
cfg.sizeY = 2082.0
myscalefctr = 20.0
cfg.sizeX = 420.0/myscalefctr # r = 210 um and hexagonal side length = 230.9 um
cfg.sizeZ = 420.0/myscalefctr
cfg.scaleDensity = 1.0/myscalefctr**2 # 1.0 # Number of cells = 31346

cfg.simLabel = 'v6_batch0_21mar22_LowDensityD'

mpiexec -n 30 --use-hwthread-cpus nrniv -python -mpi init.py

started ~11:51 ...

Running simulation using NEURON for 300.0 ms...
0.1s
0.2s
0.3s
  Done; run time = 174.64 s; real-time ratio: 0.00.

Searching for .pkl node files in ../data/v6_batch0_21mar22_LowDensityD/v6_batch0_21mar22_LowDensityD_node_data ...

Gathering data from files for simulation: v6_batch0_21mar22_LowDensityD ...
  Merging data file: v6_batch0_21mar22_LowDensityD_node_0.pkl

>>> quit()
Traceback (most recent call last):
  File "init.py", line 30, in <module>
    sim.saveDataInNodes(); sim.gatherDataFromFiles()
  File "/opt/anaconda3/lib/python3.7/site-packages/netpyne/sim/gather.py", line 473, in gatherDataFromFiles
    allSimData[key].update(value)
ValueError: dictionary update sequence element #0 has length 3; 2 is required

there are 30 pkl files in output ... so something went wrong in merging the data together

will try again w/o distributed saving ... 

  Run time: 174.17 s
   L1_DAC_bNA : 0.000 Hz
   L1_DAC_cNA : 3.333 Hz
   L1_DLAC_cNA : 3.333 Hz
   L1_HAC_bNA : 0.000 Hz
   L1_HAC_cIR : 0.000 Hz
   L1_HAC_cNA : 0.000 Hz
   L1_NGC-DA_bNA : 3.333 Hz
   L1_NGC-DA_cAC : 3.333 Hz
   L1_NGC-DA_cNA : 3.333 Hz
   L1_NGC-DA_cST : 3.333 Hz
   L1_NGC-SA_cNA : 3.333 Hz
   L1_SLAC_bNA : 3.333 Hz
   L1_SLAC_cAC : 0.000 Hz
   L1_SLAC_cNA : 0.000 Hz
   L23_BP_bAC : 3.333 Hz
   L23_BP_bIR : 3.333 Hz
   L23_BP_bNA : 3.333 Hz
   L23_BP_cAC : 3.333 Hz
   L23_BP_cNA : 3.333 Hz
   L23_BP_dST : 3.333 Hz
   L23_BTC_bAC : 3.333 Hz
   L23_BTC_bIR : 0.000 Hz
   L23_BTC_bNA : 3.333 Hz
   L23_BTC_cAC : 0.000 Hz
   L23_BTC_cNA : 0.000 Hz
   L23_ChC_cAC : 3.333 Hz
   L23_ChC_cNA : 3.333 Hz
   L23_ChC_dNA : 0.000 Hz
   L23_DBC_bAC : 3.333 Hz
   L23_DBC_bIR : 3.333 Hz
   L23_DBC_bNA : 3.333 Hz
   L23_DBC_cAC : 3.333 Hz
   L23_LBC_bAC : 0.000 Hz
   L23_LBC_bNA : 0.000 Hz
   L23_LBC_cAC : 3.333 Hz
   L23_LBC_cNA : 3.333 Hz
   L23_LBC_cST : 0.000 Hz
   L23_LBC_dNA : 0.000 Hz
   L23_MC_bAC : 0.000 Hz
   L23_MC_bNA : 0.000 Hz
   L23_MC_cAC : 0.000 Hz
   L23_MC_cNA : 0.000 Hz
   L23_MC_dNA : 0.000 Hz
   L23_NBC_bAC : 3.333 Hz
   L23_NBC_bNA : 0.000 Hz
   L23_NBC_cAC : 3.333 Hz
   L23_NBC_cIR : 0.000 Hz
   L23_NBC_cNA : 3.333 Hz
   L23_NBC_dNA : 0.000 Hz
   L23_NGC_bNA : 3.333 Hz
   L23_NGC_cAC : 3.333 Hz
   L23_NGC_cNA : 0.000 Hz
   L23_NGC_cST : 0.000 Hz
   L23_PC_cAD : 1.111 Hz
   L23_SBC_bNA : 13.333 Hz
   L23_SBC_cAC : 3.333 Hz
   L23_SBC_dNA : 3.333 Hz
   L4_BP_bAC : 23.333 Hz
   L4_BP_bIR : 3.333 Hz
   L4_BP_bNA : 10.000 Hz
   L4_BP_cAC : 23.333 Hz
   L4_BP_cNA : 6.667 Hz
   L4_BP_dST : 3.333 Hz
   L4_BTC_bAC : 3.333 Hz
   L4_BTC_bIR : 0.000 Hz
   L4_BTC_bST : 10.000 Hz
   L4_BTC_cAC : 3.333 Hz
   L4_BTC_cNA : 3.333 Hz
   L4_BTC_dNA : 0.000 Hz
   L4_ChC_cAC : 6.667 Hz
   L4_ChC_cNA : 0.000 Hz
   L4_ChC_dNA : 0.000 Hz
   L4_DBC_bAC : 0.000 Hz
   L4_DBC_bIR : 0.000 Hz
   L4_DBC_bNA : 0.000 Hz
   L4_DBC_bST : 0.000 Hz
   L4_DBC_cAC : 13.333 Hz
   L4_DBC_cIR : 0.000 Hz
   L4_DBC_cNA : 3.333 Hz
   L4_LBC_cAC : 0.000 Hz
   L4_LBC_cNA : 6.667 Hz
   L4_LBC_cST : 0.000 Hz
   L4_LBC_dNA : 3.333 Hz
   L4_LBC_dST : 0.000 Hz
   L4_MC_bAC : 0.000 Hz
   L4_MC_bNA : 0.000 Hz
   L4_MC_cAC : 0.000 Hz
   L4_MC_cNA : 0.000 Hz
   L4_MC_dNA : 0.000 Hz
   L4_NBC_cAC : 3.333 Hz
   L4_NBC_cIR : 0.000 Hz
   L4_NBC_cNA : 26.667 Hz
   L4_NBC_dNA : 3.333 Hz
   L4_NGC_bNA : 6.667 Hz
   L4_NGC_cAC : 10.000 Hz
   L4_NGC_cNA : 13.333 Hz
   L4_NGC_cST : 0.000 Hz
   L4_PC_cAD : 2.381 Hz
   L4_SBC_bNA : 63.333 Hz
   L4_SBC_cAC : 6.667 Hz
   L4_SBC_dNA : 66.667 Hz
   L4_SP_cAD : 2.222 Hz
   L4_SS_cAD : 0.000 Hz
   L5_BP_bAC : 16.667 Hz
   L5_BP_bIR : 3.333 Hz
   L5_BP_bNA : 16.667 Hz
   L5_BP_cAC : 36.667 Hz
   L5_BP_cNA : 20.000 Hz
   L5_BP_dST : 3.333 Hz
   L5_BTC_bAC : 3.333 Hz
   L5_BTC_cAC : 30.000 Hz
   L5_BTC_cNA : 3.333 Hz
   L5_ChC_cAC : 13.333 Hz
   L5_ChC_cNA : 30.000 Hz
   L5_ChC_dNA : 3.333 Hz
   L5_DBC_bAC : 3.333 Hz
   L5_DBC_bIR : 3.333 Hz
   L5_DBC_bNA : 6.667 Hz
   L5_DBC_bST : 3.333 Hz
   L5_DBC_cAC : 13.333 Hz
   L5_DBC_cIR : 3.333 Hz
   L5_DBC_cNA : 6.667 Hz
   L5_LBC_bAC : 0.000 Hz
   L5_LBC_cAC : 13.333 Hz
   L5_LBC_cIR : 3.333 Hz
   L5_LBC_cNA : 20.000 Hz
   L5_LBC_cST : 3.333 Hz
   L5_LBC_dNA : 3.333 Hz
   L5_LBC_dST : 3.333 Hz
   L5_MC_bAC : 3.333 Hz
   L5_MC_bIR : 3.333 Hz
   L5_MC_bST : 3.333 Hz
   L5_MC_cAC : 3.333 Hz
   L5_MC_cNA : 3.333 Hz
   L5_MC_cST : 3.333 Hz
   L5_MC_dNA : 3.333 Hz
   L5_NBC_bAC : 20.000 Hz
   L5_NBC_bIR : 3.333 Hz
   L5_NBC_bST : 23.333 Hz
   L5_NBC_cAC : 10.000 Hz
   L5_NBC_cIR : 3.333 Hz
   L5_NBC_cNA : 16.667 Hz
   L5_NBC_cST : 3.333 Hz
   L5_NBC_dST : 0.000 Hz
   L5_NGC_bNA : 26.667 Hz
   L5_NGC_cAC : 33.333 Hz
   L5_NGC_cNA : 30.000 Hz
   L5_NGC_cST : 3.333 Hz
   L5_SBC_bNA : 20.000 Hz
   L5_SBC_cAC : 50.000 Hz
   L5_SBC_dNA : 76.667 Hz
   L5_STPC_cAD : 0.000 Hz
   L5_TTPC1_cAD : 10.952 Hz
   L5_TTPC2_cAD : 8.889 Hz
   L5_UTPC_cAD : 10.000 Hz
   L6_BPC_cAD : 5.000 Hz
   L6_BP_bAC : 10.000 Hz
   L6_BP_bIR : 3.333 Hz
   L6_BP_bNA : 6.667 Hz
   L6_BP_cAC : 26.667 Hz
   L6_BP_cNA : 13.333 Hz
   L6_BP_dST : 3.333 Hz
   L6_BTC_bAC : 0.000 Hz
   L6_BTC_cAC : 23.333 Hz
   L6_BTC_cNA : 0.000 Hz
   L6_ChC_cAC : 43.333 Hz
   L6_ChC_cNA : 6.667 Hz
   L6_ChC_dNA : 93.333 Hz
   L6_DBC_bAC : 13.333 Hz
   L6_DBC_bIR : 6.667 Hz
   L6_DBC_bNA : 3.333 Hz
   L6_DBC_bST : 16.667 Hz
   L6_DBC_cAC : 40.000 Hz
   L6_DBC_cIR : 26.667 Hz
   L6_DBC_cNA : 3.333 Hz
   L6_IPC_cAD : 7.778 Hz
   L6_LBC_bAC : 10.000 Hz
   L6_LBC_bIR : 3.333 Hz
   L6_LBC_bNA : 3.333 Hz
   L6_LBC_bST : 3.333 Hz
   L6_LBC_cNA : 90.000 Hz
   L6_LBC_cST : 63.333 Hz
   L6_MC_bAC : 0.000 Hz
   L6_MC_bIR : 0.000 Hz
   L6_MC_bNA : 0.000 Hz
   L6_MC_bST : 0.000 Hz
   L6_MC_cAC : 3.333 Hz
   L6_MC_cIR : 0.000 Hz
   L6_MC_cNA : 3.333 Hz
   L6_NBC_bAC : 23.333 Hz
   L6_NBC_bIR : 30.000 Hz
   L6_NBC_bST : 3.333 Hz
   L6_NBC_cAC : 10.000 Hz
   L6_NBC_cIR : 46.667 Hz
   L6_NBC_cNA : 23.333 Hz
   L6_NBC_cST : 3.333 Hz
   L6_NBC_dST : 0.000 Hz
   L6_NGC_bNA : 16.667 Hz
   L6_NGC_cAC : 23.333 Hz
   L6_NGC_cNA : 13.333 Hz
   L6_NGC_cST : 3.333 Hz
   L6_SBC_bNA : 60.000 Hz
   L6_SBC_cAC : 56.667 Hz
   L6_SBC_dNA : 43.333 Hz
   L6_TPC_L1_cAD : 2.000 Hz
   L6_TPC_L4_cAD : 6.667 Hz
   L6_UTPC_cAD : 7.333 Hz
   ss_RTN_o : 6.529 Hz
   ss_RTN_m : 9.938 Hz
   ss_RTN_i : 1.170 Hz
   VPL_sTC : 3.333 Hz
   VPM_sTC : 6.667 Hz
   POm_sTC_s1 : 10.012 Hz
Saving output as ../data/v6_batch0_21mar22_LowDensityD/v6_batch0_21mar22_LowDensityD_data.pkl ... 
Finished saving!

ok, now have a single output pkl file and also dipole png, raster had an error saving:
Plotting raster...
  There was an exception in plotRaster(): 
    addLegend() got multiple values for argument 'labels' 
    (<class 'TypeError'>, TypeError("addLegend() got multiple values for argument 'labels'"), <traceback object at 0x7fe7d68d54b0>)

cells fire early but then might be mostly quiet after ... 

can see that in the dipole
[[/home/samn/S1_netpyne/data/v6_batch0_21mar22_LowDensityD/v6_batch0_21mar22_LowDensityD_dipole.png]]
will look at the data inside the pkl file ... 

python
import pickle
from pylab import *
ion()
d = pickle.load(open('../data/v6_batch0_21mar22_LowDensityD/v6_batch0_21mar22_LowDensityD_data.pkl','rb'))
d.keys() # dict_keys(['netpyne_version', 'netpyne_changeset', 'simConfig', 'simData'])
d['simData'].keys() # dict_keys(['spkt', 'spkid', 'V_soma', 't', 'dipoleSum', 'popRates', 'avgRate'])

plot(d['simData']['spkt'],d['simData']['spkid'],'ko')
savefig('gif/21mar22_rast_a0.png')

simdat = d['simData']
plot(simdat['t'],simdat['dipoleSum'])
simdat['dipoleSum'].shape # (3000, 3)
ok, so that's the total dipole in the 3 directions

simdat['popRates']['L6_TPC_L1_cAD'] # this has population rate (not as a function of time)

** retry recording population and cell dipoles with reduced model

cfg.simLabel = 'v6_batch0_21mar22_LowDensityE'

cfg.recordDipole = True
cfg.saveDipoleCells = ['all']
cfg.saveDipolePops = cfg.allpops

also adjust raster plot call to try to avoid error ... 

mpiexec -n 30 --use-hwthread-cpus nrniv -python -mpi init.py

Running simulation using NEURON for 300.0 ms...
0.1s
0.2s
0.3s
  Done; run time = 176.40 s; real-time ratio: 0.00.

ran to completion ...

also, raster plot no error this time (removed labels in call)
hmm, cant see anything on the raster figure though
[[/home/samn/S1_netpyne/data/v6_batch0_21mar22_LowDensityE/v6_batch0_21mar22_LowDensityE_raster.png]]

check simdata output ... 

python -i simdat.py

d,sdat = loaddat('v6_batch0_21mar22_LowDensityE')
sdat.keys() # dict_keys(['spkt', 'spkid', 'V_soma', 't', 'dipoleSum', 'dipoleCells', 'dipolePops', 'popRates', 'avgRate'])

sdat['dipoleCells'].keys() # cell IDs
sdat['dipoleCells'][7529].shape # (3000, 3)

plot(sdat['t'],sdat['dipoleCells'][7499])

ok, not much activity - check cfg.py for the NetStim inputs 

** added simdat.py convenience file (for loading/viewing data)
** try same sim with some NetStim input (21mar22_LowDensityF)

hmm, note that there already is some S1 synaptic input (spontaneous activation)
set via cfg.addStimSynS1

